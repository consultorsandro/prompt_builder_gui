import { Button, VerticalBox, LineEdit, TextEdit, ScrollView, CheckBox } from "std-widgets.slint";

export component AppWindow inherits Window {
    title: "Prompt Builder GUI";
    width: 1400px;
    height: 800px;
    background: #e3f2fd;

    // Properties for data binding - make them public
    in-out property <string> few_shot_text: "";
    in-out property <string> context_text: "";
    in-out property <string> main_content_text: "";
    in-out property <string> auxiliary_content_text: "";
    in-out property <string> limitations_text: "";
    in-out property <string> refactoring_text: "";
    in-out property <string> guidance_text: "";
    in-out property <string> tests_text: "";
    in-out property <string> output_format_text: "";
    in-out property <string> preview_text: "O preview do prompt aparecer√° aqui...";

    // Callbacks
    callback generate_prompt();
    callback save_prompt();
    callback clear_all();
    callback copy_to_clipboard();

    HorizontalLayout {
        spacing: 10px;
        padding: 10px;

        // Left Panel - Input Forms
        Rectangle {
            background: #f0f8ff;
            border-radius: 12px;
            border-width: 2px;
            border-color: #b3d9ff;
            drop-shadow-blur: 6px;
            drop-shadow-color: #00000015;
            width: 60%;
            
            ScrollView {
                VerticalLayout {
                    spacing: 15px;
                    padding: 20px;

                    // Header
                    Text {
                        text: "Prompt Builder";
                        font-size: 28px;
                        font-weight: 700;
                        color: #1565c0;
                        horizontal-alignment: center;
                    }

                    // Few-Shot Section
                    VerticalLayout {
                        spacing: 5px;
                        Text {
                            text: "Few-Shot Examples";
                            font-size: 16px;
                            font-weight: 600;
                            color: #2e7d32;
                        }
                        Text {
                            text: "Forne√ßa exemplos de entrada e sa√≠da esperada";
                            font-size: 12px;
                            color: #558b2f;
                        }
                        TextEdit {
                            height: 80px;
                            text <=> few_shot_text;
                            placeholder-text: "Exemplo: Input: Pergunta sobre X\nOutput: Resposta detalhada sobre X";
                        }
                    }

                    // Context Section
                    VerticalLayout {
                        spacing: 5px;
                        Text {
                            text: "Contexto";
                            font-size: 16px;
                            font-weight: 600;
                            color: #2e7d32;
                        }
                        Text {
                            text: "Defina o contexto ou persona da IA";
                            font-size: 12px;
                            color: #558b2f;
                        }
                        TextEdit {
                            height: 80px;
                            text <=> context_text;
                            placeholder-text: "Exemplo: Voc√™ √© um especialista em...";
                        }
                    }

                    // Main Content Section
                    VerticalLayout {
                        spacing: 5px;
                        Text {
                            text: "Conte√∫do Principal";
                            font-size: 16px;
                            font-weight: 600;
                            color: #2e7d32;
                        }
                        Text {
                            text: "Instru√ß√µes principais para a IA";
                            font-size: 12px;
                            color: #558b2f;
                        }
                        TextEdit {
                            height: 100px;
                            text <=> main_content_text;
                            placeholder-text: "Descreva a tarefa principal que a IA deve executar...";
                        }
                    }

                    // Auxiliary Content Section
                    VerticalLayout {
                        spacing: 5px;
                        Text {
                            text: "Conte√∫do Auxiliar";
                            font-size: 16px;
                            font-weight: 600;
                            color: #2e7d32;
                        }
                        Text {
                            text: "Informa√ß√µes adicionais e exemplos";
                            font-size: 12px;
                            color: #558b2f;
                        }
                        TextEdit {
                            height: 60px;
                            text <=> auxiliary_content_text;
                            placeholder-text: "Informa√ß√µes de suporte, refer√™ncias, etc.";
                        }
                    }

                    // Limitations Section
                    VerticalLayout {
                        spacing: 5px;
                        Text {
                            text: "Limita√ß√µes";
                            font-size: 16px;
                            font-weight: 600;
                            color: #2e7d32;
                        }
                        Text {
                            text: "Restri√ß√µes e limita√ß√µes a serem observadas";
                            font-size: 12px;
                            color: #558b2f;
                        }
                        TextEdit {
                            height: 60px;
                            text <=> limitations_text;
                            placeholder-text: "N√£o fa√ßa X, evite Y, limite Z...";
                        }
                    }

                    // Optional Sections
                    HorizontalLayout {
                        spacing: 20px;
                        
                        VerticalLayout {
                            width: 50%;
                            spacing: 5px;
                            Text {
                                text: "Refatora√ß√£o (C√≥digo)";
                                font-size: 14px;
                                font-weight: 600;
                                color: #1976d2;
                            }
                            TextEdit {
                                height: 50px;
                                text <=> refactoring_text;
                                placeholder-text: "Instru√ß√µes de refatora√ß√£o...";
                            }
                        }

                        VerticalLayout {
                            width: 50%;
                            spacing: 5px;
                            Text {
                                text: "Orienta√ß√µes";
                                font-size: 14px;
                                font-weight: 600;
                                color: #1976d2;
                            }
                            TextEdit {
                                height: 50px;
                                text <=> guidance_text;
                                placeholder-text: "Tom, estilo, p√∫blico-alvo...";
                            }
                        }
                    }

                    HorizontalLayout {
                        spacing: 20px;
                        
                        VerticalLayout {
                            width: 50%;
                            spacing: 5px;
                            Text {
                                text: "Testes";
                                font-size: 14px;
                                font-weight: 600;
                                color: #1976d2;
                            }
                            TextEdit {
                                height: 50px;
                                text <=> tests_text;
                                placeholder-text: "Requisitos de teste...";
                            }
                        }

                        VerticalLayout {
                            width: 50%;
                            spacing: 5px;
                            Text {
                                text: "Formato de Sa√≠da";
                                font-size: 14px;
                                font-weight: 600;
                                color: #1976d2;
                            }
                            TextEdit {
                                height: 50px;
                                text <=> output_format_text;
                                placeholder-text: "Markdown, JSON, texto...";
                            }
                        }
                    }

                    // Action Buttons
                    HorizontalLayout {
                        spacing: 10px;
                        padding-top: 20px;
                        
                        Button {
                            text: "üöÄ Gerar Prompt";
                            clicked => { generate_prompt(); }
                        }
                        
                        Button {
                            text: "üíæ Salvar";
                            clicked => { save_prompt(); }
                        }
                        
                        Button {
                            text: "üìã Copiar";
                            clicked => { copy_to_clipboard(); }
                        }
                        
                        Button {
                            text: "üóëÔ∏è Limpar Tudo";
                            clicked => { clear_all(); }
                        }
                    }
                }
            }
        }

        // Right Panel - Preview
        Rectangle {
            background: #e8f5e8;
            border-radius: 12px;
            border-width: 2px;
            border-color: #a5d6a7;
            drop-shadow-blur: 6px;
            drop-shadow-color: #00000015;
            width: 40%;
            
            VerticalLayout {
                spacing: 10px;
                padding: 20px;

                Text {
                    text: "üìÑ Preview do Prompt";
                    font-size: 20px;
                    font-weight: 600;
                    color: #1b5e20;
                    horizontal-alignment: center;
                }

                ScrollView {
                    Rectangle {
                        background: white;
                        border-radius: 4px;
                        padding: 10px;
                        
                        Text {
                            text: preview_text;
                            font-size: 12px;
                            wrap: word-wrap;
                            color: black;
                            width: 100%;
                        }
                    }
                }
            }
        }
    }
} 